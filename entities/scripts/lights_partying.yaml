sequence:
  - repeat:
      while:
        - condition: state
          entity_id: input_boolean.party
          state: "on"
      sequence:
        - service: light.turn_on
          data_template:
            entity_id:
              - light.bedroom_leds
              - light.hall_leds
              - light.kitchen_leds
              - light.living_room_dining_led
              - light.living_room_leds
              - light.living_room_tv_leds
              - light.office_desk_led
            rgb_color:
              [
                "{{ (range(0, 255)|random) }}",
                "{{ (range(0, 255)|random) }}",
                "{{ (range(0, 255)|random) }}",
              ]
            brightness: "{{ (range(50, 250)|random) }}"
            transition: 0.1
        - delay: "{{ states.input_number.party_speed.state }}"
