var DirectusSdk=function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(e),o=function(){this.mode="undefined"==typeof window?"json":"cookie"},i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u,a=function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};function c(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}t.Meta=void 0,(u=t.Meta||(t.Meta={})).TOTAL_COUNT="total_count",u.FILTER_COUNT="filter_count";var l,p=function(t){function e(e){return t.call(this,"".concat(null!=e?e:"ID"," cannot be an empty string"))||this}return s(e,t),e}(Error),f=function(){function t(t,e){this.collection=t,this.transport=e,this.endpoint=t.startsWith("directus_")?"/".concat(t.substring(9)):"/items/".concat(t)}return t.prototype.readOne=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:if(""==="".concat(t))throw new p("id");return[4,this.transport.get("".concat(this.endpoint,"/").concat(encodeURI(t)),a({params:e},null==n?void 0:n.requestOptions))];case 1:return[2,r.sent().data]}}))}))},t.prototype.readMany=function(t,e,n){var r;return c(this,void 0,void 0,(function(){var o,i,s,u,c,l;return h(this,(function(h){switch(h.label){case 0:return[4,this.transport.get("/fields/".concat(this.collection))];case 1:return o=h.sent(),i=null===(r=o.data)||void 0===r?void 0:r.find((function(t){return!0===t.schema.is_primary_key})),[4,this.transport.get("".concat(this.endpoint),a({params:a({filter:a((l={},l[i.field]={_in:t},l),null==e?void 0:e.filter),sort:(null==e?void 0:e.sort)||i.field},e)},null==n?void 0:n.requestOptions))];case 2:return s=h.sent(),u=s.data,c=s.meta,[2,a({data:u},c&&{meta:c})]}}))}))},t.prototype.readByQuery=function(t,e){return c(this,void 0,void 0,(function(){var n,r,o;return h(this,(function(i){switch(i.label){case 0:return[4,this.transport.get("".concat(this.endpoint),a({params:t},null==e?void 0:e.requestOptions))];case 1:return n=i.sent(),r=n.data,o=n.meta,[2,a({data:r},o&&{meta:o})]}}))}))},t.prototype.createOne=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,this.transport.post("".concat(this.endpoint),t,a({params:e},null==n?void 0:n.requestOptions))];case 1:return[2,r.sent().data]}}))}))},t.prototype.createMany=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,this.transport.post("".concat(this.endpoint),t,a({params:e},null==n?void 0:n.requestOptions))];case 1:return[2,r.sent()]}}))}))},t.prototype.updateOne=function(t,e,n,r){return c(this,void 0,void 0,(function(){return h(this,(function(o){switch(o.label){case 0:if(""==="".concat(t))throw new p("id");return[4,this.transport.patch("".concat(this.endpoint,"/").concat(encodeURI(t)),e,a({params:n},null==r?void 0:r.requestOptions))];case 1:return[2,o.sent().data]}}))}))},t.prototype.updateMany=function(t,e,n,r){return c(this,void 0,void 0,(function(){return h(this,(function(o){switch(o.label){case 0:return[4,this.transport.patch("".concat(this.endpoint),{keys:t,data:e},a({params:n},null==r?void 0:r.requestOptions))];case 1:return[2,o.sent()]}}))}))},t.prototype.updateByQuery=function(t,e,n,r){return c(this,void 0,void 0,(function(){return h(this,(function(o){switch(o.label){case 0:return[4,this.transport.patch("".concat(this.endpoint),{query:t,data:e},a({params:n},null==r?void 0:r.requestOptions))];case 1:return[2,o.sent()]}}))}))},t.prototype.deleteOne=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:if(""==="".concat(t))throw new p("id");return[4,this.transport.delete("".concat(this.endpoint,"/").concat(encodeURI(t)),void 0,null==e?void 0:e.requestOptions)];case 1:return n.sent(),[2]}}))}))},t.prototype.deleteMany=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.transport.delete("".concat(this.endpoint),t,null==e?void 0:e.requestOptions)];case 1:return n.sent(),[2]}}))}))},t}(),d=function(){function t(t){this.transport=t}return t.prototype.create=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/activity/comment",t)];case 1:return[2,e.sent().data]}}))}))},t.prototype.update=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:if(""==="".concat(t))throw new p("comment_activity_id");return[4,this.transport.patch("/activity/comment/".concat(encodeURI(t)),{comment:e})];case 1:return[2,n.sent().data]}}))}))},t.prototype.delete=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:if(""==="".concat(t))throw new p("comment_activity_id");return[4,this.transport.delete("/activity/comment/".concat(encodeURI(t)))];case 1:return e.sent(),[2]}}))}))},t}(),v=function(t){function e(e){var n=t.call(this,"directus_activity",e)||this;return n._comments=new d(n.transport),n}return s(e,t),Object.defineProperty(e.prototype,"comments",{get:function(){return this._comments},enumerable:!1,configurable:!0}),e}(f),y=function(){function t(t){this.transport=t}return t.prototype.readOne=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:if(""==="".concat(t))throw new p("collection");return[4,this.transport.get("/collections/".concat(t))];case 1:return[2,e.sent().data]}}))}))},t.prototype.readAll=function(){return c(this,void 0,void 0,(function(){var t,e,n;return h(this,(function(r){switch(r.label){case 0:return[4,this.transport.get("/collections")];case 1:return t=r.sent(),e=t.data,n=t.meta,[2,{data:e,meta:n}]}}))}))},t.prototype.createOne=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/collections",t)];case 1:return[2,e.sent().data]}}))}))},t.prototype.createMany=function(t){return c(this,void 0,void 0,(function(){var e,n,r;return h(this,(function(o){switch(o.label){case 0:return[4,this.transport.post("/collections",t)];case 1:return e=o.sent(),n=e.data,r=e.meta,[2,{data:n,meta:r}]}}))}))},t.prototype.updateOne=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:if(""==="".concat(t))throw new p("collection");return[4,this.transport.patch("/collections/".concat(t),e,{params:n})];case 1:return[2,r.sent().data]}}))}))},t.prototype.deleteOne=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:if(""==="".concat(t))throw new p("collection");return[4,this.transport.delete("/collections/".concat(t))];case 1:return e.sent(),[2]}}))}))},t}(),b=function(){function t(t){this.transport=t}return t.prototype.readOne=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:if(""==="".concat(t))throw new p("collection");if(""==="".concat(e))throw new p("id");return[4,this.transport.get("/fields/".concat(t,"/").concat(e))];case 1:return[2,n.sent().data]}}))}))},t.prototype.readMany=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:if(""==="".concat(t))throw new p("collection");return[4,this.transport.get("/fields/".concat(t))];case 1:return[2,e.sent().data]}}))}))},t.prototype.readAll=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.transport.get("/fields")];case 1:return[2,t.sent().data]}}))}))},t.prototype.createOne=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:if(""==="".concat(t))throw new p("collection");return[4,this.transport.post("/fields/".concat(t),e)];case 1:return[2,n.sent().data]}}))}))},t.prototype.updateOne=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:if(""==="".concat(t))throw new p("collection");if(""==="".concat(e))throw new p("field");return[4,this.transport.patch("/fields/".concat(t,"/").concat(e),n)];case 1:return[2,r.sent().data]}}))}))},t.prototype.deleteOne=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:if(""==="".concat(t))throw new p("collection");if(""==="".concat(e))throw new p("field");return[4,this.transport.delete("/fields/".concat(t,"/").concat(e))];case 1:return n.sent(),[2]}}))}))},t}(),g=function(t){function e(e){return t.call(this,"directus_files",e)||this}return s(e,t),e.prototype.import=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/files/import",t)];case 1:return[2,e.sent().data]}}))}))},e}(f),_=function(t){function e(e){return t.call(this,"directus_folders",e)||this}return s(e,t),e}(f),w=function(t){function e(e){return t.call(this,"directus_permissions",e)||this}return s(e,t),e}(f),m=function(t){function e(e){return t.call(this,"directus_presets",e)||this}return s(e,t),e}(f),O=function(){function t(t){this.transport=t}return t.prototype.readOne=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:if(""==="".concat(t))throw new p("collection");if(""==="".concat(e))throw new p("id");return[4,this.transport.get("/relations/".concat(t,"/").concat(e))];case 1:return[2,n.sent().data]}}))}))},t.prototype.readMany=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:if(""==="".concat(t))throw new p("collection");return[4,this.transport.get("/relations/".concat(t))];case 1:return[2,e.sent().data]}}))}))},t.prototype.readAll=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.transport.get("/relations")];case 1:return[2,t.sent().data]}}))}))},t.prototype.createOne=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/relations",t)];case 1:return[2,e.sent().data]}}))}))},t.prototype.updateOne=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:if(""==="".concat(t))throw new p("collection");if(""==="".concat(e))throw new p("field");return[4,this.transport.patch("/relations/".concat(t,"/").concat(e),{params:n})];case 1:return[2,r.sent().data]}}))}))},t.prototype.deleteOne=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:if(""==="".concat(t))throw new p("collection");if(""==="".concat(e))throw new p("field");return[4,this.transport.delete("/relations/".concat(t,"/").concat(e))];case 1:return n.sent(),[2]}}))}))},t}(),k=function(t){function e(e){return t.call(this,"directus_revisions",e)||this}return s(e,t),e}(f),x=function(t){function e(e){return t.call(this,"directus_roles",e)||this}return s(e,t),e}(f),P=function(){function t(t){this.transport=t}return t.prototype.ping=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.transport.get("/server/ping")];case 1:return[2,t.sent().raw]}}))}))},t.prototype.info=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.transport.get("/server/info")];case 1:return[2,t.sent().data]}}))}))},t}(),j=function(){function t(t,e){this.collection=t,this.transport=e,this.endpoint=t.startsWith("directus_")?"/".concat(t.substring(9)):"/items/".concat(t)}return t.prototype.read=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.get("".concat(this.endpoint),{params:t})];case 1:return[2,e.sent().data]}}))}))},t.prototype.update=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.transport.patch("".concat(this.endpoint),t,{params:e})];case 1:return[2,n.sent().data]}}))}))},t}(),q=function(t){function e(e){return t.call(this,"directus_settings",e)||this}return s(e,t),e}(j),R=function(){function t(t){this.transport=t}return t.prototype.send=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,this.transport.post("/users/invite",{email:t,role:e,invite_url:n})];case 1:return r.sent(),[2]}}))}))},t.prototype.accept=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("/users/invite/accept",{token:t,password:e})];case 1:return n.sent(),[2]}}))}))},t}(),T=function(){function t(t){this.transport=t}return t.prototype.generate=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/users/me/tfa/generate",{password:t})];case 1:return[2,e.sent().data]}}))}))},t.prototype.enable=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("/users/me/tfa/enable",{secret:t,otp:e})];case 1:return n.sent(),[2]}}))}))},t.prototype.disable=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/users/me/tfa/disable",{otp:t})];case 1:return e.sent(),[2]}}))}))},t}(),S=function(){function t(t){this._transport=t}return Object.defineProperty(t.prototype,"tfa",{get:function(){return this._tfa||(this._tfa=new T(this._transport))},enumerable:!1,configurable:!0}),t.prototype.read=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this._transport.get("/users/me",{params:t})];case 1:return[2,e.sent().data]}}))}))},t.prototype.update=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this._transport.patch("/users/me",t,{params:e})];case 1:return[2,n.sent().data]}}))}))},t}(),E=function(t){function e(e){return t.call(this,"directus_users",e)||this}return s(e,t),Object.defineProperty(e.prototype,"invites",{get:function(){return this._invites||(this._invites=new R(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"me",{get:function(){return this._me||(this._me=new S(this.transport))},enumerable:!1,configurable:!0}),e}(f),I=function(){function t(t){var e=this;this.random={string:function(t){return void 0===t&&(t=32),c(e,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.get("/utils/random/string",{params:{length:t}})];case 1:return[2,e.sent().data]}}))}))}},this.hash={generate:function(t){return c(e,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/utils/hash/generate",{string:t})];case 1:return[2,e.sent().data]}}))}))},verify:function(t,n){return c(e,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/utils/hash/verify",{string:t,hash:n})];case 1:return[2,e.sent().data]}}))}))}},this.transport=t}return t.prototype.sort=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,this.transport.post("/utils/sort/".concat(encodeURI(t)),{item:e,to:n})];case 1:return r.sent(),[2]}}))}))},t.prototype.revert=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.transport.post("/utils/revert/".concat(encodeURI(t)))];case 1:return e.sent(),[2]}}))}))},t}(),A=function(){},U=function(){},H=function(t){function e(n,r){var o,i,s=this;return(s=(null===(o=null==r?void 0:r.errors)||void 0===o?void 0:o.length)?t.call(this,null===(i=null==r?void 0:r.errors[0])||void 0===i?void 0:i.message)||this:t.call(this,(null==n?void 0:n.message)||"Unknown transport error")||this).parent=n,s.response=r,s.errors=(null==r?void 0:r.errors)||[],Object.values(r||{}).some((function(t){return void 0!==t}))||(s.response=void 0),Object.setPrototypeOf(s,e.prototype),s}return s(e,t),e}(Error);!function(t){t.AuthToken="auth_token",t.RefreshToken="auth_refresh_token",t.Expires="auth_expires",t.ExpiresAt="auth_expires_at"}(l||(l={}));var M=function(t){function e(e){var n,r=t.call(this)||this;return r.prefix=null!==(n=null==e?void 0:e.prefix)&&void 0!==n?n:"",r}return s(e,t),Object.defineProperty(e.prototype,"auth_token",{get:function(){return this.get(l.AuthToken)},set:function(t){null===t?this.delete(l.AuthToken):this.set(l.AuthToken,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"auth_expires",{get:function(){var t=this.get(l.Expires);return null===t?null:parseInt(t)},set:function(t){null===t?this.delete(l.Expires):this.set(l.Expires,t.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"auth_expires_at",{get:function(){var t=this.get(l.ExpiresAt);return null===t?null:parseInt(t)},set:function(t){null===t?this.delete(l.ExpiresAt):this.set(l.ExpiresAt,t.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"auth_refresh_token",{get:function(){return this.get(l.RefreshToken)},set:function(t){null===t?this.delete(l.RefreshToken):this.set(l.RefreshToken,t)},enumerable:!1,configurable:!0}),e}(A),B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.values={},e}return s(e,t),e.prototype.get=function(t){var e=this.key(t);return e in this.values?this.values[e]:null},e.prototype.set=function(t,e){return this.values[this.key(t)]=e,e},e.prototype.delete=function(t){var e=this.key(t),n=this.get(t);return e in this.values&&delete this.values[e],n},e.prototype.key=function(t){return"".concat(this.prefix).concat(t)},e}(M),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.get=function(t){var e=localStorage.getItem(this.key(t));return null!==e?e:null},e.prototype.set=function(t,e){return localStorage.setItem(this.key(t),e),e},e.prototype.delete=function(t){var e=this.key(t),n=this.get(e);return n&&localStorage.removeItem(e),n},e.prototype.key=function(t){return"".concat(this.prefix).concat(t)},e}(M),D=function(t){function e(e){var n,o=t.call(this)||this;return o.config=e,o.axios=r.default.create({baseURL:o.config.url,params:o.config.params,headers:o.config.headers,onUploadProgress:o.config.onUploadProgress,withCredentials:!0}),(null===(n=o.config)||void 0===n?void 0:n.beforeRequest)&&(o.beforeRequest=o.config.beforeRequest),o}return s(e,t),e.prototype.beforeRequest=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return[2,t]}))}))},Object.defineProperty(e.prototype,"url",{get:function(){return this.config.url},enumerable:!1,configurable:!0}),e.prototype.request=function(t,e,n,o){var i,s,u,a,l;return c(this,void 0,void 0,(function(){var c,p,f,d,v;return h(this,(function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),c={method:t,url:e,data:n,params:null==o?void 0:o.params,headers:null==o?void 0:o.headers,onUploadProgress:null==o?void 0:o.onUploadProgress},[4,this.beforeRequest(c)];case 1:return c=h.sent(),[4,this.axios.request(c)];case 2:if(p=h.sent(),f={raw:p.data,status:p.status,statusText:p.statusText,headers:p.headers,data:p.data.data,meta:p.data.meta,errors:p.data.errors},p.data.errors)throw new H(null,f);return[2,f];case 3:if(!(d=h.sent())||d instanceof Error==!1)throw d;if(r.default.isAxiosError(d))throw v=null===(i=d.response)||void 0===i?void 0:i.data,new H(d,{raw:null===(s=d.response)||void 0===s?void 0:s.data,status:null===(u=d.response)||void 0===u?void 0:u.status,statusText:null===(a=d.response)||void 0===a?void 0:a.statusText,headers:null===(l=d.response)||void 0===l?void 0:l.headers,data:null==v?void 0:v.data,meta:null==v?void 0:v.meta,errors:null==v?void 0:v.errors});throw new H(d);case 4:return[2]}}))}))},e.prototype.get=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.request("get",t,void 0,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.head=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.request("head",t,void 0,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.options=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.request("options",t,void 0,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.delete=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,this.request("delete",t,e,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.put=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,this.request("put",t,e,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.post=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,this.request("post",t,e,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.patch=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,this.request("patch",t,e,n)];case 1:return[2,r.sent()]}}))}))},e}(U),F=function(){function t(t){this.transport=t}return t.prototype.request=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("/auth/password/request",{email:t,reset_url:e})];case 1:return n.sent(),[2]}}))}))},t.prototype.reset=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.transport.post("/auth/password/reset",{token:t,password:e})];case 1:return n.sent(),[2]}}))}))},t}(),L=function(t){function e(e){var n,r,o,i=t.call(this)||this;return i.autoRefresh=!0,i.msRefreshBeforeExpires=3e4,i.staticToken="",i._transport=e.transport,i._storage=e.storage,i.autoRefresh=null!==(n=null==e?void 0:e.autoRefresh)&&void 0!==n?n:i.autoRefresh,i.mode=null!==(r=null==e?void 0:e.mode)&&void 0!==r?r:i.mode,i.msRefreshBeforeExpires=null!==(o=null==e?void 0:e.msRefreshBeforeExpires)&&void 0!==o?o:i.msRefreshBeforeExpires,(null==e?void 0:e.staticToken)&&(i.staticToken=null==e?void 0:e.staticToken,i.updateStorage({access_token:i.staticToken,expires:null,refresh_token:null})),i}return s(e,t),Object.defineProperty(e.prototype,"storage",{get:function(){return this._storage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transport",{get:function(){return this._transport},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this._storage.auth_token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"password",{get:function(){return this.passwords=this.passwords||new F(this._transport)},enumerable:!1,configurable:!0}),e.prototype.resetStorage=function(){this._storage.auth_token=null,this._storage.auth_refresh_token=null,this._storage.auth_expires=null,this._storage.auth_expires_at=null},e.prototype.updateStorage=function(t){var e,n,r=null!==(e=t.expires)&&void 0!==e?e:null;this._storage.auth_token=t.access_token,this._storage.auth_refresh_token=null!==(n=t.refresh_token)&&void 0!==n?n:null,this._storage.auth_expires=r,this._storage.auth_expires_at=(new Date).getTime()+(null!=r?r:0)},e.prototype.refreshIfExpired=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:if(this.staticToken)return[2];if(!this.autoRefresh)return[2];if(this._storage.auth_expires_at)return[3,5];t.label=1;case 1:return t.trys.push([1,,3,4]),[4,this._refreshPromise];case 2:return t.sent(),[3,4];case 3:return this._refreshPromise=void 0,[7];case 4:return[2];case 5:this._storage.auth_expires_at<(new Date).getTime()+this.msRefreshBeforeExpires&&(this._refreshPromise=this.refresh()),t.label=6;case 6:return t.trys.push([6,,8,9]),[4,this._refreshPromise];case 7:return t.sent(),[3,9];case 8:return this._refreshPromise=void 0,[7];case 9:return[2]}}))}))},e.prototype.refresh=function(){var t;return c(this,void 0,void 0,(function(){var e,n;return h(this,(function(r){switch(r.label){case 0:return e=this._storage.auth_refresh_token,this.resetStorage(),[4,this._transport.post("/auth/refresh",{refresh_token:"json"===this.mode?e:void 0})];case 1:return n=r.sent(),this.updateStorage(n.data),[2,a(a({access_token:n.data.access_token},(null===(t=n.data)||void 0===t?void 0:t.refresh_token)&&{refresh_token:n.data.refresh_token}),{expires:n.data.expires})]}}))}))},e.prototype.login=function(t){var e;return c(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return this.resetStorage(),[4,this._transport.post("/auth/login",a({mode:this.mode},t),{headers:{Authorization:null}})];case 1:return n=r.sent(),this.updateStorage(n.data),[2,a(a({access_token:n.data.access_token},(null===(e=n.data)||void 0===e?void 0:e.refresh_token)&&{refresh_token:n.data.refresh_token}),{expires:n.data.expires})]}}))}))},e.prototype.static=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.staticToken||(this.staticToken=t),[4,this._transport.get("/users/me",{params:{access_token:t},headers:{Authorization:null}})];case 1:return e.sent(),this.updateStorage({access_token:t,expires:null,refresh_token:null}),[2,!0]}}))}))},e.prototype.logout=function(){return c(this,void 0,void 0,(function(){var t;return h(this,(function(e){switch(e.label){case 0:return"json"===this.mode&&(t=this._storage.auth_refresh_token||void 0),[4,this._transport.post("/auth/logout",{refresh_token:t})];case 1:return e.sent(),this.updateStorage({access_token:null,expires:null,refresh_token:null}),[2]}}))}))},e}(o),z=function(){function t(t){this.transport=t}return t.prototype.request=function(t,e,n){return c(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,this.transport.post(t,{query:e,variables:void 0===n?{}:n})];case 1:return[2,r.sent()]}}))}))},t.prototype.items=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.request("/graphql",t,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.system=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.request("/graphql/system",t,e)];case 1:return[2,n.sent()]}}))}))},t}(),W=function(){function t(t,e){var n,r,i,s,u,l,p,f,d,v=this;if(this._url=t,this._options=e,this._items={},this._singletons={},(null===(n=this._options)||void 0===n?void 0:n.storage)&&(null===(r=this._options)||void 0===r?void 0:r.storage)instanceof A)this._storage=this._options.storage;else{var y=null===(i=this._options)||void 0===i?void 0:i.storage,b=null!=y?y:{},g=b.mode,_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(b,["mode"]);"MemoryStorage"===g||"undefined"==typeof window?this._storage=new B(_):this._storage=new C(_)}(null===(s=this._options)||void 0===s?void 0:s.transport)&&(null===(u=this._options)||void 0===u?void 0:u.transport)instanceof U?this._transport=this._options.transport:this._transport=new D(a({url:this.url,beforeRequest:function(t){return c(v,void 0,void 0,(function(){var e,n;return h(this,(function(r){switch(r.label){case 0:return[4,this._auth.refreshIfExpired()];case 1:return r.sent(),e=this.storage.auth_token,n=e?e.startsWith("Bearer ")?String(this.storage.auth_token):"Bearer ".concat(this.storage.auth_token):"",[2,a(a({},t),{headers:a({Authorization:n},t.headers)})]}}))}))}},null===(l=this._options)||void 0===l?void 0:l.transport)),(null===(p=this._options)||void 0===p?void 0:p.auth)&&(null===(f=this._options)||void 0===f?void 0:f.auth)instanceof o?this._auth=this._options.auth:this._auth=new L(a({transport:this._transport,storage:this._storage},null===(d=this._options)||void 0===d?void 0:d.auth))}return Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"auth",{get:function(){return this._auth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._storage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transport",{get:function(){return this._transport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activity",{get:function(){return this._activity||(this._activity=new v(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collections",{get:function(){return this._collections||(this._collections=new y(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fields",{get:function(){return this._fields||(this._fields=new b(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"files",{get:function(){return this._files||(this._files=new g(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"folders",{get:function(){return this._folders||(this._folders=new _(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"permissions",{get:function(){return this._permissions||(this._permissions=new w(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"presets",{get:function(){return this._presets||(this._presets=new m(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"relations",{get:function(){return this._relations||(this._relations=new O(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"revisions",{get:function(){return this._revisions||(this._revisions=new k(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roles",{get:function(){return this._roles||(this._roles=new x(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"users",{get:function(){return this._users||(this._users=new E(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"settings",{get:function(){return this._settings||(this._settings=new q(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._server||(this._server=new P(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"utils",{get:function(){return this._utils||(this._utils=new I(this.transport))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphql",{get:function(){return this._graphql||(this._graphql=new z(this.transport))},enumerable:!1,configurable:!0}),t.prototype.singleton=function(t){return this._singletons[t]||(this._singletons[t]=new j(t,this.transport))},t.prototype.items=function(t){return this._items[t]||(this._items[t]=new f(t,this.transport))},t}();return t.ActivityHandler=v,t.Auth=L,t.BaseStorage=M,t.CollectionsHandler=y,t.CommentsHandler=d,t.Directus=W,t.EmptyParamError=p,t.FieldsHandler=b,t.FilesHandler=g,t.FoldersHandler=_,t.IAuth=o,t.IStorage=A,t.ITransport=U,t.ItemsHandler=f,t.LocalStorage=C,t.MemoryStorage=B,t.PermissionsHandler=w,t.PresetsHandler=m,t.RelationsHandler=O,t.RevisionsHandler=k,t.RolesHandler=x,t.ServerHandler=P,t.SettingsHandler=q,t.Transport=D,t.TransportError=H,t.UsersHandler=E,t.UtilsHandler=I,Object.defineProperty(t,"__esModule",{value:!0}),t}({},axios);
//# sourceMappingURL=sdk.global.min.js.map
