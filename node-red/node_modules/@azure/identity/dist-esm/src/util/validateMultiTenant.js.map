{"version":3,"file":"validateMultiTenant.js","sourceRoot":"","sources":["../../../src/util/validateMultiTenant.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;AAIlC;;GAEG;AACH,MAAM,CAAC,MAAM,uBAAuB,GAClC,2MAA2M,CAAC;AAE9M;;;;GAIG;AACH,MAAM,UAAU,yBAAyB,CACvC,QAAiB,EACjB,8BAAwC,EACxC,eAAiC;IAEjC,IACE,CAAC,8BAA8B;SAC/B,eAAe,aAAf,eAAe,uBAAf,eAAe,CAAE,QAAQ,CAAA;QACzB,QAAQ;QACR,eAAe,CAAC,QAAQ,KAAK,QAAQ,EACrC;QACA,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC;KAC1C;IACD,IAAI,8BAA8B,KAAI,eAAe,aAAf,eAAe,uBAAf,eAAe,CAAE,QAAQ,CAAA,EAAE;QAC/D,OAAO,eAAe,CAAC,QAAQ,CAAC;KACjC;IACD,OAAO,QAAQ,CAAC;AAClB,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport { GetTokenOptions } from \"@azure/core-auth\";\n\n/**\n * @internal\n */\nexport const multiTenantErrorMessage =\n  \"A getToken request was attempted with a tenant different than the tenant configured at the initialization of the credential, but multi-tenant authentication was not enabled in this credential instance.\";\n\n/**\n * Verifies whether locally assigned tenants are equal to tenants received through getToken.\n * Returns the appropriate tenant.\n * @internal\n */\nexport function processMultiTenantRequest(\n  tenantId?: string,\n  allowMultiTenantAuthentication?: boolean,\n  getTokenOptions?: GetTokenOptions\n): string | undefined {\n  if (\n    !allowMultiTenantAuthentication &&\n    getTokenOptions?.tenantId &&\n    tenantId &&\n    getTokenOptions.tenantId !== tenantId\n  ) {\n    throw new Error(multiTenantErrorMessage);\n  }\n  if (allowMultiTenantAuthentication && getTokenOptions?.tenantId) {\n    return getTokenOptions.tenantId;\n  }\n  return tenantId;\n}\n"]}